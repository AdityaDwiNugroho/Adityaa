<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Diary - Aditya Dwi Nugroho</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231a1a1a'/><text x='50' y='70' font-family='monospace' font-size='60' fill='%23d4af37' text-anchor='middle'>A</text></svg>">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body>
    <div class="cursor-dot"></div>
    <div class="cursor-ring"></div>
    <div class="bg-animation"></div>
    <div class="scroll-progress"></div>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <a href="/" style="color: var(--accent); text-decoration: none;">
                    <span class="pixel-text">ADN.exe</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="/">Back to Portfolio</a></li>
            </ul>
        </div>
    </nav>

    <section class="section-editorial" style="min-height: 100vh;">
        <div class="editorial-layout">
            <div class="section-header">
                <div class="section-number">00</div>
                <h1 class="section-title-editorial">Personal Diary</h1>
                <div class="section-line"></div>
                <p class="section-description">Thoughts, notes, and reflections</p>
            </div>

            <div id="diary-content">
                <!-- Login Form -->
                <div id="login-form" class="glass" style="max-width: 500px; margin: 60px auto; padding: 40px;">
                    <h3 style="font-family: 'Press Start 2P', cursive; font-size: 1em; color: var(--accent); margin-bottom: 30px;">Enter Password</h3>
                    <form onsubmit="checkPassword(event)" style="display: flex; flex-direction: column; gap: 20px;">
                        <input 
                            type="password" 
                            id="diary-password" 
                            placeholder="••••••••"
                            style="padding: 15px; background: var(--bg-dark); border: 1px solid var(--border); color: var(--text); font-family: 'Space Mono', monospace; font-size: 1em;"
                            autofocus
                        />
                        <button type="submit" class="btn btn-primary">Unlock Diary</button>
                        <p id="error-msg" style="color: #ff0000; font-size: 0.85em; display: none; text-align: center;">Incorrect password</p>
                    </form>
                </div>

                <!-- Diary Entries (hidden until logged in) -->
                <div id="diary-entries" style="display: none;">
                    <div style="text-align: right; margin-bottom: 40px;">
                        <button onclick="logout()" class="btn btn-secondary" style="padding: 10px 20px; font-size: 0.85em;">Logout</button>
                    </div>

                    <!-- Entry 1 -->
                    <article class="glass" style="margin-bottom: 40px; padding: 40px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                            <div>
                                <div style="font-family: 'Press Start 2P', cursive; font-size: 0.7em; color: var(--accent); margin-bottom: 10px;">Entry 001</div>
                                <h3 style="font-size: 1.5em; color: var(--text);">Starting Fresh</h3>
                            </div>
                            <div style="color: var(--text-muted); font-size: 0.9em;">
                                <div>Oct 4, 2025</div>
                                <div style="font-size: 0.85em; margin-top: 5px;">23:47</div>
                            </div>
                        </div>
                        <div style="color: var(--text-muted); line-height: 1.8; font-size: 1em;">
                            <p style="margin-bottom: 15px;">
                                Built this portfolio from scratch today. Go + HTMX, no frameworks. Feels good to keep things simple.
                            </p>
                            <p style="margin-bottom: 15px;">
                                The old money aesthetic just clicked. Not flashy, just solid. Like good code should be.
                            </p>
                            <p>
                                Next up: more projects, maybe write about Rust learnings.
                            </p>
                        </div>
                    </article>

                    <!-- Add more entries here -->
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-muted); font-style: italic;">
                        More entries to come...
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>© 2025 Aditya Dwi Nugroho</p>
        </div>
    </footer>

    <script>
        async function checkPassword(e) {
            e.preventDefault();
            const input = document.getElementById('diary-password');
            const error = document.getElementById('error-msg');
            const button = e.target.querySelector('button');
            
            button.disabled = true;
            button.textContent = 'Checking...';
            
            try {
                const response = await fetch('/api/diary-auth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: input.value })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('login-form').style.display = 'none';
                    document.getElementById('diary-entries').style.display = 'block';
                    sessionStorage.setItem('diaryAuth', 'true');
                    error.style.display = 'none';
                } else {
                    error.style.display = 'block';
                    input.value = '';
                    input.focus();
                }
            } catch (err) {
                error.textContent = 'Connection error';
                error.style.display = 'block';
            }
            
            button.disabled = false;
            button.textContent = 'Unlock Diary';
        }

        function logout() {
            sessionStorage.removeItem('diaryAuth');
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('diary-entries').style.display = 'none';
            document.getElementById('diary-password').value = '';
        }

        // Check if already logged in
        window.addEventListener('load', () => {
            if (sessionStorage.getItem('diaryAuth') === 'true') {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('diary-entries').style.display = 'block';
            }
        });

        // Custom Cursor
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorRing = document.querySelector('.cursor-ring');
        
        let mouseX = 0, mouseY = 0;
        let ringX = 0, ringY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursorDot.style.left = mouseX + 'px';
            cursorDot.style.top = mouseY + 'px';
        });
        
        function animateRing() {
            ringX += (mouseX - ringX) * 0.15;
            ringY += (mouseY - ringY) * 0.15;
            cursorRing.style.left = ringX + 'px';
            cursorRing.style.top = ringY + 'px';
            requestAnimationFrame(animateRing);
        }
        animateRing();
        
        const hoverElements = document.querySelectorAll('a, button, .btn, input');
        hoverElements.forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursorRing.style.width = '60px';
                cursorRing.style.height = '60px';
                cursorRing.style.borderColor = 'var(--primary)';
                cursorDot.style.transform = 'translate(-50%, -50%) scale(1.5)';
            });
            
            el.addEventListener('mouseleave', () => {
                cursorRing.style.width = '40px';
                cursorRing.style.height = '40px';
                cursorRing.style.borderColor = 'var(--accent)';
                cursorDot.style.transform = 'translate(-50%, -50%) scale(1)';
            });
        });

        // Scroll progress
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.querySelector('.scroll-progress').style.width = scrolled + '%';
        });
    </script>
</body>
</html>
